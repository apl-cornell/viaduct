process main {
    let len = 100;

    a[len] : int{A};
    b[len] : int{B};

    a_sum : int{A};
    a_sum = 0;

    ai : int{A};
    for (ai = 0; ai < len; ai++) {
        a_sum += a[ai];
    }

    b_sum : int{B};
    b_sum = 0;

    bi : int{B};
    for (bi = 0; bi < len; bi++) {
        b_sum += b[bi];
    }

    scale : int{A & B};
    scale = downgrade(a_sum, {A & B}) + downgrade(b_sum, {A & B});

    sum : int{A & B};
    sum = 0;

    j : int{A & B};
    for (j = 0; j < len; j++) {
        sum += scale * j;
    }

    prodsum : int{A && B};
    prodsum = downgrade(sum, {A && B});
}

host alice : {A};
host bob   : {B};
