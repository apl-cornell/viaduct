host alice : {A}
host bob   : {A}

fun main() {
    let $aliceLocal@Local(host = alice) = input int from alice;
    let $aliceLDiff@Local(host = alice) = $aliceLocal;
    let $aliceLSum@Local(host = alice) = $aliceLocal;
    let $aliceLProd@Local(host = alice) = $aliceLocal;
    let $aliceLNeg@Local(host = alice) = $aliceLocal;

    let $bobLocal@Local(host = bob) = input int from bob;
    let $bobLDiff@Local(host = bob) = $bobLocal;
    let $bobLSum@Local(host = bob) = $bobLocal;
    let $bobLProd@Local(host = bob) = $bobLocal;
    let $bobLNeg@Local(host = bob) = $bobLocal;

    let $secretDiff@ArithABY(client = bob, server = alice) = ($aliceLDiff - $bobLDiff);
    let $secretSum@ArithABY(client = bob, server = alice) = ($aliceLSum + $bobLSum);
    let $secretProd@ArithABY(client = bob, server = alice) = ($aliceLProd * $bobLProd);
    let $secretNegBob@ArithABY(client = bob, server = alice) = -$bobLNeg;
    let $secretNegAlice@ArithABY(client = bob, server = alice) = -$aliceLNeg;

    let $clearDiff@Replication(hosts = {alice, bob}) = $secretDiff;
    let $clearSum@Replication(hosts = {alice, bob}) = $secretSum;
    let $clearProd@Replication(hosts = {alice, bob}) = $secretProd;
    let $clearNegAlice@Local(host = alice) = $secretNegAlice;
    let $clearNegBob@Local(host = bob) = $secretNegBob;

    output $clearDiff to alice;
    output $clearDiff to bob;
    output $clearSum to alice;
    output $clearSum to bob;
    output $clearProd to alice;
    output $clearProd to bob;
    output $clearNegAlice to alice;
    output $clearNegBob to bob;
}
